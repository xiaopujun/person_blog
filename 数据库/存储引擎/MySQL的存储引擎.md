# MyISAM储存引擎

## MyISAM的特点

- MyISAM不支持事务，也不支持外键约束，只支持全文索引，数据文件和索引文件是分开保存的
- 访问速度快，对事务完整性没有要求
- MyISAM适合查询、插入为主的应用
- MyISAM在磁盘上存储成三个文件，文件名和表名都相同，扩展名分别为：
    - .frm文件存储表结构的定义
    - 数据文件的扩展名为.MYD(MYData)
    - 索引文件的扩展名是.MYI(MYIndex)
- 表级锁定形式，数据在更新时锁定整个表
- 数据库在读写过程中相互阻塞
    - 会在数据写入的过程阻塞用户数据的读取
    - 也会在数据读取的过程中阻塞用户的数据写入
- 数据单独写入或读取，速度过程较快且占用资源相对少
- MyISAM支持的存储格式有：静态表、动态表、压缩表

## MyISAM表支持的储存格式

- 静态（固定长度）表: 静态表是默认的存储格式，静态表中的字段都是非可变字段，这样每个记录都是固定长度的，这种存储方式的优点是存储非常迅速，容易缓存，出现故障容易恢复，缺点是占用的空间通常比动态表多


- 动态表: 动态表包含可变字段，记录不是固定长度的，这样存储的优点是占用空间较小，但是频繁的更新、删除记录会产生碎片，需要定期执行OPTIMIZE TABLE语句或myiaamchk -r命令来改善性能，并且出现故障的时候恢复相对比较困难


- 压缩表: 压缩表由myiaamchk工具创建，占据非常小的空间，因为每条记录都是被单独压缩的，所以只有非常小的访问开支

## MyISAM适用场景

- 公司业务不需要事务的支持
- 单方面读取或写入数据比较多的业务
- MyISAM存储引擎数据读写都比较频繁场景不适合
- 使用读写并发访问相对较低的业务
- 数据修改相对较少的业务
- 对数据业务一致性要求不是非常高的业务
- 服务器硬件资源相对比较差

# InnoDB储存引擎

## InnoDB的特点

- 支持事务，支持4个事务隔离级别
- MySQL从5.5.5版本开始，默认的存储引擎为InnoDB
- 读写阻塞与事务隔离级别相关
- 能非常高效的缓存索引和数据
- 表与主键以簇的方式存储 BTREE
- 支持分区、表空间，类似oracle数据库
- 支持外键约束，5.5前不支持全文索引，5.5后支持全文索引
- 对硬件资源要求还是比较高的场合
- 行级锁定，但是全表扫描仍然会是表级锁定，如 update table set a=1 where user like '%zhang%';

