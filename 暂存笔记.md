

# 数据库事务

一系列要发生的连续的操作，比如转账

事务安全：保证一系列操作的完整性。

## 事务操作

1. 自动事务
2. 手动事务

### 手动事务--操作步骤

1.开启事务

```sql
start transaction;
```

2.具体的sql操作

3.关闭事务

关闭事务有两种情况，

第一种：提交事务，代表事务所有操作成功

```sql
commit;
```

第二种：回滚事务，表示事务失败

```sql
rollback;
```

使用事务的时候，数据库的存储引擎必须为innodb

## 事务操作原理

事务开启之后，所有的操作都会保存到临时的事务日志中，事务日志只有在得到commit命令之后猜会同步到数据库表，其他任何情况都会清空（rollback、断电等情况)

## 事务回滚点

在某一个操作完成之后，后续的操作可能成功，可能失败，但不管是成功还是失败，前面的操作都已经成功，可以在当前成功的位置，设置一个点，可供后续操作失败之后退回到该位置。而不是返回所有操作。这个点称之为回滚点。

设置回滚点：

```sql
savepoint 回滚点名字;
```

回到回滚点：

```sql
rollback  to 回滚点名字
```



# 网络编程

节点：互联网上的每一个网络设备（电脑、手机、交换机等）都是一个节点。

在互联网上通过ip地址来确定每一个结点的位置，而在节点上，通过端口号来区分不同的软件。使用url（统一资源定位符）来区分不同的资源。

协议：各方通信的时候都要遵守的一个标准，常见的有TCP/UDP协议、http协议等。

## Java中网络编程常用类的操作

ip地址分类

- IPV4：32位地址，以点分十进制标识，如：192.168.0.1
- IPV6：128位（16个字节）写成8个16位的无符号整数，每个整数用四个16进制位表示，如：2001:0db8:3c4d:0015:0000:0000:1a2f:1a2b

特殊ip地址

- 127.0.0.1：本机地址
- 192.168.0.0 - 192.168.255.255：私有地址，属于非注册地址，为专门机狗内部使用

### InetAddress类

用于定位一个网络节点。

常用方法

| 方法             | 说明                         |
| ---------------- | ---------------------------- |
| getLocalHost()   | 返回本机的地址               |
| getByName()      | 根据域名或ip地址获取主机地址 |
| getHostAddress() | 获取主机地址                 |
| getHostName()    | 获取主机名                   |

### 端口操作

查看所有端口

```shell
netstat -ano
```

查看指定端口

```shell
netstat -aon|findstr "8080"
```

查看指定的进程

```shell
tasklist|findstr "8080"
```

查看具体程序

使用任务管理器查看PID

### InetSocketAddress类

Java中的端口操作类，方法详情查看jdk文档

### URL类

参考jdk文档即可

## 传输协议

TCP：面向连接的，可靠的，基于字符流的传输层协议，需要三次握手：拨号，确认收到，开始传输。

UDP：无连接的传输层协议，面向事务的简单的不可靠的协议。